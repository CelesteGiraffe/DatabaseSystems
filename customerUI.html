<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Customer's Interface - Pedro's Pizza</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <div class="container mt-5">
        <!-- Logo and Welcome Message -->
        <div class="row align-items-center">
            <div class="col-auto">
                <img src="logo.png" class="img-fluid" alt="Pedro's Pizza Logo" style="max-width: 50px" />
            </div>
            <div class="col">
                <h1>Welcome to Pedro's Pizza!</h1>
            </div>
        </div>

        <!-- Pizza Selection Section -->
        <section aria-label="Pizza Selection">
            <div class="row mt-4">
                <!-- Margherita Pizza -->
                <div class="col-md-3">
                    <div class="card">
                        <img src="margpizza.jpeg" class="card-img-top" alt="Margherita Pizza" />
                        <div class="card-body">
                            <h5 class="card-title">Margherita Pizza</h5>
                            <select class="form-control mb-2" id="pizzaSizeSelect" aria-label="Select pizza size">
                                <option value="13">Large £13</option>
                                <option value="11">Medium £11</option>
                                <option value="9">Small £9</option>
                            </select>
                            <button class="btn btn-success" onclick="addToOrder('Margherita Pizza')">add</button>
                        </div>
                    </div>
                </div>
                <!-- More cards for other pizza options -->
            </div>
        </section>

        <!-- Order Placement Section -->
        <section aria-label="Order Placement" class="mt-4">
            <h2>Place Your Order</h2>
            <div class="row">
                <!-- Order Details Column -->
                <div class="col-md-6">
                    <form id="orderForm">
                        <div class="form-group">
                            <label for="deliveryType">Delivery or Carryout</label>
                            <select class="form-control" id="deliveryType">
                                <option>Delivery</option>
                                <option>Carryout</option>
                            </select>
                        </div>
                        <div class="mt-4">
                            <h3>Your Order Summary</h3>
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- No static pizza entry here. It will be populated dynamically by the JavaScript function -->
                                </tbody>
                            </table>
                        </div>
                        <div class="form-group">
                            <label>Total Price:</label>
                            <span id="totalPrice">£0</span>
                        </div>
                        <button type="submit" class="btn btn-primary">Place Order</button>
                    </form>
                </div>
                <!-- Customer Details Column -->
                <div class="col-md-6">
                    <form id="customerDetails">
                        <div class="form-group">
                            <label for="nameInput">Name</label>
                            <input type="text" class="form-control" id="nameInput" placeholder="Enter your name" required />
                        </div>
                        <div class="form-group">
                            <label for="addressInput">Address</label>
                            <input type="text" class="form-control" id="addressInput" placeholder="Enter your address" required />
                        </div>
                        <div class="form-group">
                            <label for="townInput">Town / City</label>
                            <input type="text" class="form-control" id="townInput" placeholder="Enter your town/city" required />
                        </div>
                        <div class="form-group">
                            <label for="postcodeFinalInput">Post Code</label>
                            <input type="text" class="form-control" id="postcodeFinalInput" placeholder="Enter your post code" pattern="[A-Za-z0-9]+" required />
                        </div>
                        <div class="form-group">
                            <label for="phoneInput">Phone Number</label>
                            <input type="tel" class="form-control" id="phoneInput" placeholder="Enter your phone number" required />
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Order Tracking Section -->
        <section aria-label="Order Tracking" class="mt-4">
            <h2>Track Your Order</h2>
            <div class="alert alert-success" role="alert">
                Your order is being prepared!
            </div>
        </section>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script>
    function addToOrder(pizzaName) {
        const sizeSelect = document.getElementById("pizzaSizeSelect");
        const selectedSize = sizeSelect.options[sizeSelect.selectedIndex].text.split(' ')[0];
        const price = parseFloat(sizeSelect.value);

        const tableBody = document.querySelector("tbody");
        let found = false;

        for (let row of tableBody.rows) {
            if (row.cells[0].textContent === `${pizzaName} (${selectedSize})`) {
                const qtyCell = row.cells[1];
                qtyCell.textContent = parseInt(qtyCell.textContent) + 1;
                row.cells[2].textContent = '£' + (price * parseInt(qtyCell.textContent)).toFixed(2);
                found = true;
                break;
            }
        }

        if (!found) {
            const newRow = tableBody.insertRow();
            newRow.innerHTML = `
                <td>${pizzaName} (${selectedSize})</td>
                <td>1</td>
                <td>£${price.toFixed(2)}</td>
            `;
        }

        updateTotalPrice();
    }

    function updateTotalPrice() {
        const tableBody = document.querySelector("tbody");
        let total = 0;

        for (let row of tableBody.rows) {
            total += parseFloat(row.cells[2].textContent.slice(1));
        }

        document.getElementById("totalPrice").textContent = '£' + total.toFixed(2);
    }
    </script>

</body>
</html>
